/* =========================================
   GLOBAL RESET & BASE
   ========================================= */
html, body {
  margin: 0; padding: 0; height: 100%; width: 100%;
  background: radial-gradient(circle at center, #1a1a1e 0%, #0d0d0f 100%) !important;
  font-family: -apple-system, system-ui, sans-serif;
  color: white;
  overflow-x: hidden;
  scrollbar-width: none;
  -ms-overflow-style: none;
}
body::-webkit-scrollbar { display: none; }

#map { position: absolute; top: 0; bottom: 0; width: 100%; z-index: 1; }
.mapboxgl-canvas { cursor: default; }

/* =========================================
   UI COMPONENTS (Shared)
   ========================================= */
.ui-box {
  position: fixed;
  background: #1c1c1f !important;
  border: 1px solid #323236 !important;
  color: white !important;
  z-index: 100;
  box-shadow: 0 8px 24px rgba(0,0,0,0.5);
  border-radius: 10px;
  padding: 14px 18px;
}

/* BRANDING */
.brand-box {
  top: 20px; left: 20px;
  font-weight: 900; letter-spacing: 2.5px; font-size: 14px;
  min-width: 110px; text-align: center;
}

/* NAVIGATION */
.nav-container {
  position: fixed; top: 20px; right: 20px;
  display: flex; gap: 12px; z-index: 101;
}
.nav-btn {
  position: relative !important;
  text-decoration: none; font-size: 12px; font-weight: bold;
  color: #777; transition: 0.2s;
  min-width: 65px; text-align: center;
}
.nav-btn.active, .nav-btn:hover {
  color: #fff; border-bottom: 2px solid #8b5cf6;
}

/* SEARCH BAR */
.search-container {
  position: fixed; top: 20px; left: 50%;
  transform: translateX(-50%);
  z-index: 101; width: 380px;
}
#global-search {
  width: 100%; padding: 12px 25px;
  background: #1e1e1e; border: 1px solid #444;
  border-radius: 30px; color: white;
  font-size: 14px; outline: none;
  box-shadow: 0 6px 20px rgba(0,0,0,0.8);
}
#global-search:focus { border-color: #8b5cf6; }

/* =========================================
   VIEW MODE SWITCHER
   ========================================= */
.heatmap-switcher {
  top: 85px; left: 20px;
  width: 280px;
}

.heatmap-buttons {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  margin-top: 8px;
}

.heatmap-btn {
  flex: 1 1 calc(50% - 3px);
  background: #2a2a2f;
  border: 1px solid #444;
  color: #aaa;
  padding: 8px 10px;
  border-radius: 6px;
  font-size: 11px;
  font-weight: bold;
  cursor: pointer;
  transition: all 0.2s;
  text-align: center;
}

.heatmap-btn:hover {
  background: #3a3a3f;
  color: #fff;
  border-color: #666;
}

.heatmap-btn.active {
  background: #8b5cf6;
  color: white;
  border-color: #8b5cf6;
}

/* =========================================
   TOGGLES ROW (Route, Open Networks, Theme)
   ========================================= */
.toggles-row {
  top: 210px; left: 20px;
  width: 280px;
  display: flex;
  gap: 6px;
  padding: 10px 18px;
}

.toggle-btn {
  flex: 1;
  background: #2a2a2f;
  border: 1px solid #444;
  color: #aaa;
  padding: 7px 6px;
  border-radius: 6px;
  font-size: 10px;
  font-weight: bold;
  cursor: pointer;
  transition: all 0.2s;
  text-align: center;
  white-space: nowrap;
}

.toggle-btn:hover {
  background: #3a3a3f;
  color: #fff;
}

.toggle-btn.active {
  background: #8b5cf6;
  color: white;
  border-color: #8b5cf6;
}

.open-btn.active {
  background: #dc2626;
  border-color: #dc2626;
  color: white;
}

/* =========================================
   VENDOR FILTER CHIPS
   ========================================= */
.vendor-box {
  top: 268px; left: 20px;
  width: 280px;
  padding: 10px 18px;
}

.vendor-chips {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
  margin-top: 6px;
}

.vendor-chip {
  background: #2a2a2f;
  border: 1px solid #444;
  color: #999;
  padding: 4px 8px;
  border-radius: 12px;
  font-size: 9px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s;
}

.vendor-chip:hover {
  background: #3a3a3f;
  color: #fff;
  border-color: #666;
}

.vendor-chip.active {
  background: #8b5cf6;
  color: white;
  border-color: #8b5cf6;
}

/* =========================================
   MAP PANELS (Right Side)
   ========================================= */
.stats-panel {
  top: 85px; right: 20px; width: 170px;
}

.filter-menu {
  bottom: 30px; right: 20px; width: 200px;
}

.panel-title {
  font-size: 11px;
  color: #e2e2e7;
  font-weight: 800;
  letter-spacing: 1.2px;
  text-transform: uppercase;
  margin: 0 0 12px 0;
}

.ctrl {
  display: flex;
  justify-content: space-between;
  font-size: 12px;
  cursor: pointer;
}

.rssi-highlight {
  color: #8b5cf6;
  font-weight: bold;
  font-size: 11px;
}

.divider {
  border: 0;
  border-top: 1px solid #333;
  margin: 10px 0;
}

.label-tactical {
  font-size: 11px;
  color: #e2e2e7;
  font-weight: 800;
  letter-spacing: 1.2px;
  text-transform: uppercase;
  margin-bottom: 4px;
}

.stat-value {
  font-size: 34px;
  font-weight: 900;
  margin-top: 8px;
  color: #fff;
}

/* =========================================
   STATS PAGE LAYOUT
   ========================================= */
.stats-container {
  padding-top: 100px;
  width: 100%;
  display: flex;
  justify-content: center;
  padding-bottom: 40px;
}

.stats-content-wrapper {
  width: 90%;
  max-width: 1100px;
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.stats-row {
  display: flex;
  width: 100%;
  gap: 20px;
}

.stats-row .ui-box,
.stats-content-wrapper .ui-box {
  position: relative !important;
  flex: 1;
}

.stat-card {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 25px;
}

.chart-container {
  display: flex;
  flex-direction: column;
  min-height: 400px;
}

.chart-wrapper {
  flex-grow: 1;
  width: 100%;
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
}

.full-width-chart {
  height: 350px;
}

.security-legend {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
  margin-top: 15px;
  width: 100%;
  padding-top: 15px;
  border-top: 1px solid #333;
}

.legend-item {
  display: flex;
  justify-content: space-between;
  font-size: 11px;
  color: #ccc;
}

.legend-val {
  font-weight: bold;
  color: #fff;
}

/* =========================================
   TOP SSIDs TABLE
   ========================================= */
.ssid-table-box {
  height: auto !important;
  padding-bottom: 20px;
}

.ssid-table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 10px;
  font-size: 11px;
}

.ssid-table th {
  text-align: left;
  color: #888;
  font-weight: 700;
  padding: 6px 8px;
  border-bottom: 1px solid #333;
  font-size: 10px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.ssid-table td {
  padding: 6px 8px;
  color: #ccc;
  border-bottom: 1px solid #222;
}

.ssid-table tr:hover td {
  color: #fff;
  background: #2a2a2f;
}

.ssid-table .ssid-name {
  color: #a855f7;
  font-weight: 600;
}

.ssid-table .ssid-count {
  color: #8b5cf6;
  font-weight: bold;
  text-align: right;
}

/* =========================================
   ACCENTS & COLORS
   ========================================= */
.border-purple { border-top: 3px solid #a78bfa !important; }
.border-blue   { border-top: 3px solid #60a5fa !important; }
.border-wpa3   { border-top: 3px solid #4ade80 !important; }
.border-wpa2   { border-top: 3px solid #fbbf24 !important; }
.border-legacy { border-top: 3px solid #94a3b8 !important; }
.border-open   { border-top: 3px solid #f87171 !important; }

.purple-accent { color: #a78bfa; }
.green-accent  { color: #4ade80; }
.blue-accent   { color: #60a5fa; }

.dot-wpa3   { color: #4ade80; }
.dot-wpa2   { color: #fbbf24; }
.dot-legacy { color: #94a3b8; }
.dot-open   { color: #f87171; }

/* =========================================
   CUSTOM SESSION DROPDOWN
   ========================================= */
.custom-select-wrapper {
  position: relative;
}

.custom-select {
  position: relative;
  margin-top: 8px;
}

.custom-select-trigger {
  display: flex;
  justify-content: space-between;
  align-items: center;
  width: 100%;
  padding: 8px 10px;
  background: #2a2a2f;
  border: 1px solid #444;
  border-radius: 6px;
  color: #eee;
  font-size: 11px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s;
  box-sizing: border-box;
}

.custom-select-trigger:hover {
  border-color: #666;
  background: #333;
}

.custom-select.open .custom-select-trigger {
  border-color: #8b5cf6;
  background: #333;
}

.custom-select-arrow {
  font-size: 10px;
  color: #888;
  transition: transform 0.2s;
}

.custom-select.open .custom-select-arrow {
  transform: rotate(180deg);
  color: #8b5cf6;
}

.custom-select-options {
  display: none;
  position: absolute;
  bottom: calc(100% + 4px);
  left: 0;
  right: 0;
  background: #1c1c1f;
  border: 1px solid #444;
  border-radius: 6px;
  max-height: 180px;
  overflow-y: auto;
  z-index: 200;
  box-shadow: 0 -8px 24px rgba(0,0,0,0.6);
  scrollbar-width: thin;
  scrollbar-color: #444 transparent;
}

.custom-select.open .custom-select-options {
  display: block;
}

.custom-select-option {
  padding: 8px 10px;
  font-size: 11px;
  color: #aaa;
  cursor: pointer;
  transition: all 0.15s;
  border-bottom: 1px solid #2a2a2f;
}

.custom-select-option:last-child {
  border-bottom: none;
}

.custom-select-option:hover {
  background: #2a2a2f;
  color: #fff;
}

.custom-select-option.selected {
  color: #8b5cf6;
  font-weight: bold;
}

/* =========================================
   LIGHT THEME OVERRIDES
   ========================================= */
body.light-theme {
  background: #f0f0f2 !important;
}

body.light-theme .ui-box {
  background: rgba(255, 255, 255, 0.92) !important;
  border: 1px solid #d4d4d8 !important;
  color: #1c1c1f !important;
  box-shadow: 0 4px 16px rgba(0,0,0,0.1);
}

body.light-theme .brand-box,
body.light-theme .label-tactical,
body.light-theme .panel-title {
  color: #333 !important;
}

body.light-theme .stat-value {
  color: #1c1c1f;
}

body.light-theme .nav-btn {
  color: #888;
}

body.light-theme .nav-btn.active,
body.light-theme .nav-btn:hover {
  color: #1c1c1f;
}

body.light-theme #global-search {
  background: #fff;
  border-color: #ccc;
  color: #333;
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}

body.light-theme .heatmap-btn,
body.light-theme .toggle-btn,
body.light-theme .vendor-chip {
  background: #e8e8ec;
  border-color: #ccc;
  color: #555;
}

body.light-theme .heatmap-btn:hover,
body.light-theme .toggle-btn:hover,
body.light-theme .vendor-chip:hover {
  background: #d8d8dc;
  color: #333;
}

body.light-theme .heatmap-btn.active,
body.light-theme .toggle-btn.active,
body.light-theme .vendor-chip.active {
  background: #8b5cf6;
  color: white;
  border-color: #8b5cf6;
}

body.light-theme .open-btn.active {
  background: #dc2626;
  border-color: #dc2626;
}

body.light-theme .custom-select-trigger {
  background: #e8e8ec;
  border-color: #ccc;
  color: #333;
}

body.light-theme .custom-select-options {
  background: #fff;
  border-color: #ccc;
  box-shadow: 0 -4px 12px rgba(0,0,0,0.1);
}

body.light-theme .custom-select-option {
  color: #555;
  border-bottom-color: #eee;
}

body.light-theme .custom-select-option:hover {
  background: #f0f0f2;
  color: #333;
}

body.light-theme .mapboxgl-popup-content {
  background: #fff !important;
  color: #333 !important;
  border-color: #ddd;
}

body.light-theme .mapboxgl-popup-tip {
  border-top-color: #fff !important;
}

/* Stats page light theme */
body.light-theme .security-legend {
  border-top-color: #ddd;
}

body.light-theme .legend-item {
  color: #555;
}

body.light-theme .legend-val {
  color: #1c1c1f;
}

body.light-theme .divider {
  border-top-color: #ddd;
}

body.light-theme .ssid-table th {
  color: #666;
  border-bottom-color: #ddd;
}

body.light-theme .ssid-table td {
  color: #444;
  border-bottom-color: #eee;
}

body.light-theme .ssid-table tr:hover td {
  color: #1c1c1f;
  background: #f0f0f2;
}

body.light-theme .ssid-table .ssid-name {
  color: #7c3aed;
}

body.light-theme .ssid-table .ssid-count {
  color: #7c3aed;
}

body.light-theme .purple-accent {
  color: #7c3aed;
}

body.light-theme .green-accent {
  color: #16a34a;
}

body.light-theme .blue-accent {
  color: #2563eb;
}

body.light-theme .rssi-highlight {
  color: #7c3aed;
}

/* Mapbox Popups */
.mapboxgl-popup-content {
  background: #1c1c1f !important;
  color: white !important;
  border: 1px solid #444;
  border-radius: 8px;
}
.mapboxgl-popup-tip {
  border-top-color: #1c1c1f !important;
}
